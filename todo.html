<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>todo v0</title>
  </head>
  <body>
    <form>
      <input type="text" class="todo-input" placeholder="Enter todo!!" />
      <button class="todo-add">add</button>
    </form>
    <ul class="todo-list"></ul>
    <script>
      let todos = [];
      // null이 기본값이면 객체가 들어온다는 것

      const $form = document.querySelector('form');
      const $todoInput = document.querySelector('.todo-input');
      // const $todoAdd = document.querySelector('.todo-add');
      const $todoList = document.querySelector('.todo-list');

      const render = () => {
        todos
          .map(
            todo =>
              `<li id="${id}">
              <input type= "checkbox" ${completed ? 'checked' : ''}/>
              <span>${content}</span>
              <button class="todo-remove">X</button>
            </li>`
          )
          .join();
      };

      const addTodo = content => {
        todos = [{ id: 11111, content: $todoInput.value, completed: false }, ...todos];
        render();
      };

      $form.addEventListener('submit', e => {
        e.preventDefault();

        if ($todoInput.value.trim() === '') return;

        addTodo($todoInput.value);

        $todoInput.value = '';
      });

      // $todoInput.addEventListener('keyup', e => {
      //   //depth 줄이기 위한 얼리 리턴
      //   if (e.key !== 'Enter' || $todoInput.value.trim() === '') return;

      //   //1)
      //   $todoList.innerHTML =
      //     `<li>
      //     <input type= "checkbox" />
      //     <span>${$todoInput.value}</span>
      //     <button>X</button>
      //   </li>` + $todoList.innerHTML;

      //   $todoInput.value = '';
      // });

      // $todoAdd.addEventListener('click', e => {
      //     if ($todoInput.value.trim() === '') return;
      //     $todoList.innerHTML =
      //       `<li>
      //       <input type= "checkbox" />
      //       <span>${$todoInput.value}</span>
      //       <button>X</button>
      //     </li>` + $todoList.innerHTML;
      //     $todoInput.value = '';
      // });

      $todoList.addEventListener('click', e => {
        if (e.target.classList.contains('todo-remove')) e.target.parentNode.remove();
      });

      window.addEventListener('DOMContentLoaded', () => {
        todos = [
          { id: 3, content: 'JavaScript', completed: false },
          { id: 2, content: 'CSS', completed: true },
          { id: 1, content: 'HTML', completed: false },
        ];

        render();
      });
    </script>
  </body>
</html>
