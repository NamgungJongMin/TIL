<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2022.11.29 끝말잇기 게임</title>
    <style>
        .para {
            margin-bottom: 20px;
        }

        .start {
            display: block;
            margin-top: 15px;
        }
    </style>
</head>

<body>
    <div class="para"><span id="order">게임시작버튼을 눌러주세요</span></div>
    <div>제시어 : <spand id="word"></span></div>
    <input type="text" class="txtInput" disabled>
    <button type="button" class="start">게임시작 버튼</button>

    <script>
        const $para = document.querySelector('.para');
        const $order = document.querySelector('#order');
        const $word = document.querySelector('#word');
        const $startBtn = document.querySelector('.start');
        const $txtInput = document.querySelector('.txtInput');
        const suggest = '가재,사람,상자,나비,콩나물,부대찌개,휴지,음료수,칼슘,나트륨,액자,선반,안경,달력,설계,영어,한글';// 미리 준비한 끝말잇기 제시어
        const suggestArray = suggest.split(',');// 제시어들을 split으로 배열로 만들어서 변수에 담음
        suggestArray.sort();// 문자열 대로 순서대로 정렬( sort의 개념은 다음 예제에 더 자세히 다룰 예정 그냥 배열을 만든김에 sort만써서 정렬을 해봤다 )
        let randomNum;
        let testArray = [];
        let startNum = 0;
        let total;

        const gameStart = e => {// 게임시작
            total = Number(window.prompt('참가 인원이 몇명 입니까?'));
            if (total >= 4 || total < 2) {
                alert('참가 인원은 2~3명 까지만 가능합니다');
                return;
            }
            const target = e.currentTarget;
            randomNum = Math.floor(Math.random() * suggestArray.length); // Math.floor(Math.random()*(max-min+1)) + min; > 최소~ 최대 값 구하는 공식 그냥 외우자\
            target.setAttribute('disabled', 'disabled');// 어트리 뷰트는 set remove get이 있는데 속성 추가라 구글링해서 set을 써야 하는걸로 꺠달음
            $txtInput.removeAttribute('disabled');// 어트리 뷰트는 set remove get이 있는데 속성 추가라 구글링해서 set을 써야 하는걸로 꺠달음
            $txtInput.focus();
            testArray.push(suggestArray[randomNum]);// 증복검사를 위한 배열이므로 배열에 제시어를 푸시한다
            $word.textContent = suggestArray[randomNum];// 첫 제시어를 입력해준다
            count();
        }

        const gameReset = () => {// 게임 초기화
            testArray = [];
            randomNum = undefined;
            $startBtn.removeAttribute('disabled');
            $txtInput.setAttribute('disabled', 'didabled');
            $txtInput.value = ''
            $word.textContent = '';
            $order.textContent = '게임시작버튼을 눌러주세요';
            startNum = 0;
        }

        const count = () => {
            if(startNum >= total){
                startNum = 1;
            }else{
                startNum++;
            }
            $order.textContent = `${startNum + '번째 참가자'}`;
        }

        const test = e => {// 입력값 검사 하기 
    if (e.code == 'Enter') {
        const testTxt = testArray[testArray.length - 1];
        const testTxtResult = e.target.value;

        if (testTxt[testTxt.length - 1] == testTxtResult[0] && testTxtResult.length > 1) {
            if (testArray.includes(testTxtResult)) {
                alert('이미 있는 단어 이므로 게임이 끝납니다');
                gameReset();
                
            } else {
                testArray.push(e.target.value);
                $word.textContent = testArray[testArray.length - 1];
                $txtInput.value = ''
                count();
                console.log(testArray);
            }
        }else{
            alert('두글자 이상 입력해주세요');
        }
    }
}
        $txtInput.addEventListener('keypress', test);
        $startBtn.addEventListener('click', gameStart);

        // 게임 시작버튼을 누른다 > prompt로 몇명이 참가하는지 받는다 > 1~3 명까지만 참가 할수있음(0명 이하나 3명 초과는 게임을 시작할수 없음이라는 alert창 호출) > 시작을 하면 제시어를 입력받을수 있고 1번으로 시작함
        // 미리 준비 되어있는 배열에서 랜덤으로 제시어 제시 > 대기 > 제시어를 입력 받음 ( 제시어의 마지막 글자와 입력받은 글자 비교 맞으면 다음 순서 틀리면 게임 끝 alert ) > 다음 순서로 넘김
    </script>
</body>

</html>